<!DOCTYPE html>
<html class="h-full bg-brand-100 dark:bg-gray-900 dark:text-gray-300" lang="en">
<%~ include('/head') %>

<body class="h-full text-left" x-data="demo()" x-init="initDemo($nextTick)">
  <%~ include('/header') %>
  <div class="absolute inset-x-0 top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:top-0" aria-hidden="true">
    <div class="relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-yellow-300 to-brand-800 opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]" style="
        clip-path: polygon(
          74.1% 44.1%,
          100% 61.6%,
          97.5% 26.9%,
          85.5% 0.1%,
          80.7% 2%,
          72.5% 32.5%,
          60.2% 62.4%,
          52.4% 68.1%,
          47.5% 58.3%,
          45.2% 34.5%,
          27.5% 76.7%,
          0.1% 64.9%,
          17.9% 100%,
          27.6% 76.8%,
          76.1% 97.7%,
          74.1% 44.1%
        );
      "></div>
  </div>
  <div class="mt-12 w-1/2 mx-auto" x-show="show" x-transition>
    <h1 class="text-lg font-semibold my-2">Upload an MP4</h1>
    <form method=POST enctype="multipart/form-data" @submit.prevent="submitForm">
      <input x-ref="input" class="hidden" type="file" id="upload" name="video" accept="video/mp4">
      <button @click="$refs.input.click()" type="button" :class="file ? 'border-brand-400' : 'border-dashed border-gray-400 hover:border-gray-300 dark:border-gray-300 dark:hover:border-gray-400'" class="border-2 relative block w-full rounded-lg p-12 text-center focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2">
        <template x-cloak x-if="!file">
          <svg :class="file ? 'text-brand-400' : 'text-gray-400'" class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
          </svg>          
        </template>
        <template x-cloak x-if="file">
          <svg :class="file ? 'text-brand-400' : 'text-gray-400'" class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </template>
        <span class="mt-2 block text-sm font-semibold text-gray-900 dark:text-gray-300" x-text="file ? 'Video loaded!' : 'Click here'"></span>
      </button>
      <div class="flex flex-col gap-4 pt-4">
        <label for="key">OpenAI API key:</label>
        <input x-model="key" id="key" name="key" type="key" autocomplete="key" placeholder="sk-..." required class="block w-full rounded-md border-0 dark:bg-white/5 px-3.5 py-2 text-gray-900 dark:text-gray-300 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-white/10 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-brand-600 sm:text-sm sm:leading-6" />
      </div>
      <div>
        <p class="mt-10 text-center text-sm text-gray-700 dark:text-gray-400">
          Need an API key?
          <a
            href="https://openai.com"
            class="font-semibold leading-6 text-brand-800 dark:text-brand-500 hover:text-brand-700 dark:hover:text-brand-400"
            >Sign up for OpenAI API access</a
          >
        </p>
      </div>
      <button type="submit" class="mt-2 flex w-full justify-center rounded-md bg-brand-700 ring-1 ring-brand-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-brand-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-600">
        Generate Lesson
      </button>
    </form>
    <p class="h-6 my-2 text-sm" x-text="message"></p>
    <ul role="list" class="divide-y divide-brand-300/80 [&>*:nth-child(2)]:!border-t-0">
      <template x-if="file">
        <li class="flex items-center justify-between gap-x-6 py-5">
          <div class="flex gap-x-4">
            <svg class="mx-auto h-6 w-6 text-gray-300" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z" />
            </svg>
            <div class="min-w-0 flex-auto">
              <p class="text-sm font-semibold leading-6 text-gray-900 dark:text-gray-300" x-text="file.name"></p>
              <p class="mt-1 truncate text-xs leading-5 text-gray-500" x-text="file.type"></p>
            </div>
          </div>
        </li>
      </template>
    </ul>
    <p x-text="summary"></p>
  </div>
  <script type="module" src="./main.js"></script>
</body>

</html>